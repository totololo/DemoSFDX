@isTest
global class MockFiabilisationGenerator implements WebServiceMock  { 
    
    public static boolean correctAnswer = null;
    
    // when an apex class is created from a WSDL, the methods in the auto-generated class call WebServiceCallout.invoke which performs the callout
    // to the external service.
    // Since Test classes does not support web service and external callouts, the below method is created to generate a fake response.
    global void doInvoke(
        Object stub,
        Object request,
        Map<String, Object> response,
        String endpoint,
        String soapAction,
        String requestName,
        String responseNS,
        String responseName,
        String responseType) {  
            System.debug('###ghoooo');
            webserviceRnvpiAmabisCom.rnvpiResponse_element res = new webserviceRnvpiAmabisCom.rnvpiResponse_element();
            rnvpiWebserviceRnvpiAmabisComXsd.rnvpiResponse objResponse = new rnvpiWebserviceRnvpiAmabisComXsd.rnvpiResponse();
            String statut = '';
            String objdesc= '';
            if(correctAnswer) {
                statut  =   'OKMO';
            	objdesc =   '<ADR6>54500 VANDOEUVRE LES NANCY</ADR6>'+
                            '<NUM1>14</NUM1>'+
                            '<ADR4>14 rue de Provence</ADR4>'+
                            '<LIBVOIE>rue de Provence</LIBVOIE>'+
                            '<LOCLIBDEST2>VANDOEUVRE LES NANCY</LOCLIBDEST2>'+
                            '<LOCCP>54500</LOCCP>'+
                            '<STATUT>OKMO</STATUT>'+
                            '<ADR7>FRANCE</ADR7>';
            } else {
                 statut  =  'AVMW1';
                 objdesc =  '<ADR6>54500 VANDOEUVRE LES NANCY</ADR6>'+
                            '<ERRSTR>100%:5 Rue de Provence(54500 VANDOEUVRE LES NANCY, FRANCE)|100%:7 Rue de Provence(54500 VANDOEUVRE LES NANCY, FRANCE)|100%:9 Rue de Provence(54500 VANDOEUVRE LES NANCY, FRANCE)|100%:11 Rue de Provence(54500 VANDOEUVRE LES NANCY, FRANCE)|100%:12 Rue de Provence(54500 VANDOEUVRE LES NANCY, FRANCE)|100%:13 Rue de Provence(54500 VANDOEUVRE LES NANCY, FRANCE)|100%:14 Rue de Provence(54500 VANDOEUVRE LES NANCY, FRANCE)|100%:15 Rue de Provence(54500 VANDOEUVRE LES NANCY, FRANCE)|100%:16 Rue de Provence(54500 VANDOEUVRE LES NANCY, FRANCE)|100%:17 Rue de Provence(54500 VANDOEUVRE LES NANCY, FRANCE)|100%:18 Rue de Provence(54500 VANDOEUVRE LES NANCY, FRANCE)|100%:19 Rue de Provence(54500 VANDOEUVRE LES NANCY, FRANCE)|100%:20 Rue de Provence(54500 VANDOEUVRE LES NANCY, FRANCE)|100%:21 Rue de Provence(54500 VANDOEUVRE LES NANCY, FRANCE)|100%:22 Rue de Provence(54500 VANDOEUVRE LES NANCY, FRANCE)|100%:23 Rue de Provence(54500 VANDOEUVRE LES NANCY, FRANCE)|100%:25 Rue de Provence(54500 VANDOEUVRE LES NANCY, FRANCE)|100%:27 Rue de Provence(54500 VANDOEUVRE LES NANCY, FRANCE)|100%: Rue de Provence(54500 VANDOEUVRE LES NANCY, FRANCE)</ERRSTR>'+
                            '<ADR4>Rue de Provence</ADR4>'+
                            '<LADR>Null/5 Rue de Provence/54500 VANDOEUVRE LES NANCY/FRANCE|Null/7 Rue de Provence/54500 VANDOEUVRE LES NANCY/FRANCE|Null/9 Rue de Provence/54500 VANDOEUVRE LES NANCY/FRANCE|Null/11 Rue de Provence/54500 VANDOEUVRE LES NANCY/FRANCE|Null/12 Rue de Provence/54500 VANDOEUVRE LES NANCY/FRANCE|Null/13 Rue de Provence/54500 VANDOEUVRE LES NANCY/FRANCE|Null/14 Rue de Provence/54500 VANDOEUVRE LES NANCY/FRANCE|Null/15 Rue de Provence/54500 VANDOEUVRE LES NANCY/FRANCE|Null/16 Rue de Provence/54500 VANDOEUVRE LES NANCY/FRANCE|Null/17 Rue de Provence/54500 VANDOEUVRE LES NANCY/FRANCE|Null/18 Rue de Provence/54500 VANDOEUVRE LES NANCY/FRANCE|Null/19 Rue de Provence/54500 VANDOEUVRE LES NANCY/FRANCE|Null/20 Rue de Provence/54500 VANDOEUVRE LES NANCY/FRANCE|Null/21 Rue de Provence/54500 VANDOEUVRE LES NANCY/FRANCE|Null/22 Rue de Provence/54500 VANDOEUVRE LES NANCY/FRANCE|Null/23 Rue de Provence/54500 VANDOEUVRE LES NANCY/FRANCE|Null/25 Rue de Provence/54500 VANDOEUVRE LES NANCY/FRANCE|Null/27 Rue de Provence/54500 VANDOEUVRE LES NANCY/FRANCE|Null/ Rue de Provence/54500 VANDOEUVRE LES NANCY/FRANCE</LADR>'+
                            '<ADR2>Null</ADR2>'+
                            '<LIBVOIE>rue de Provence</LIBVOIE>'+
                            '<LOCLIBDEST2>VANDOEUVRE LES NANCY</LOCLIBDEST2>'+
                            '<LOCCP>54500</LOCCP>'+
                            '<STATUT>AVMW1</STATUT>'+
                   			'<ADR7>FRANCE</ADR7>';
            }
            objResponse.statut = statut;
            objResponse.objdesc = objdesc;
            
            // Create response element from the autogenerated class.
            // Populate response element.
            // Add response element to the response parameter, as follows:
            res.return_x = objResponse;
            response.put('response_x', res); 
        }
}